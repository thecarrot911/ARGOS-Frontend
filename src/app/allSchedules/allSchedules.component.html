<div class="container mx-auto my-2">
    <div class="overflow-x-auto flex justify-center">
        <h1 class="mt-10 mb-5 text-center font-bold text-lg lg:text-5xl bg-gradient-to-br from-white via-white to-transparent bg-clip-text text-transparent">
        PLANIFICACIONES DEL AÑO</h1>
    </div>
    <div
        class="container text-white my-10 mx-auto border-b border-b-4 border-gray-500">
    </div>
</div>

<div class="container mx-auto m-20">
    <ng-container *ngIf="existePlanificacion; else SinPlanificaciones">
        <div class="grid grid-cols-4 gap-6 grid-flow-row auto-rows-auto rounded-md bg-slate-700 p-6">
            <ng-container *ngFor="let planificacion of planificacionAnios.data">
                <div (click)="SeleccionPlanificacion(planificacion.year)" [ngClass]="{
                            'bg-black': planificacion.mostrar,
                            'dark:bg-gray-800': !planificacion.mostrar
                        }"
                    class="flex flex-col dark:bg-gray-800 border dark:border-gray-900 dark:text-white hover:bg-black transition duration-150 ease-linear rounded-lg p-2 flex justify-center items-center">
                    <div class="flex justify-center my-6">
                            <p class="font-bold text-4xl text-slate-200 leading-4 group-hover:text-indigo-400">
                                {{planificacion.year}}</p>
                    </div>
                </div>
            </ng-container>
        </div>
    </ng-container>
    <ng-template #SinPlanificaciones>
        <div class="mx-auto flex justify-center px-10">
            <span class="text-4xl font-bold text-gray-200"> NO HAY PLANIFICACIONES REGISTRADAS </span>
        </div>
        <div>
            <button (click)="GenerarPlanificacion()"
                class="mx-auto flex font-medium rounded-lg dark:focus:ring-gray-600 p-5 m-10
                hover:ease-in-out
                dark:bg-gray-900 border dark:border-gray-900 dark:text-white shadow-lg shadow-cyan-500/50">
                <span class="text-white font-bold">GENERAR PLANIFICACIÓN</span>
            </button>
        </div>
    </ng-template>
</div>

<div class="container mx-auto pb-20">
    <ng-container *ngIf="efectoCarga">
        <div aria-label="Loading..." role="status">
            <svg class="h-6 w-6 animate-spin" viewBox="3 3 18 18">
                <path class="fill-gray-200"
                    d="M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5ZM3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z">
                </path>
                <path class="fill-gray-800"
                    d="M16.9497 7.05015C14.2161 4.31648 9.78392 4.31648 7.05025 7.05015C6.65973 7.44067 6.02656 7.44067 5.63604 7.05015C5.24551 6.65962 5.24551 6.02646 5.63604 5.63593C9.15076 2.12121 14.8492 2.12121 18.364 5.63593C18.7545 6.02646 18.7545 6.65962 18.364 7.05015C17.9734 7.44067 17.3403 7.44067 16.9497 7.05015Z">
                </path>
            </svg>
        </div>
        <h1>Cargando...</h1>
    </ng-container>

    <ng-container *ngIf="hayPlanificacion && !efectoCarga; else SinPlanificacion">
        <div class="grid grid-cols-12 bg-red-500">
            <div class="col-span-9 grid grid-cols-6">
                <ng-container *ngFor="let planificacion of planificacionAnual.data">
                    <div class="col-span-2 p-2">
                        <div (click)="SeleccionMes(planificacion.planificacion_id)" class=" text-center text-white p-4 round shadow-md"
                            [ngClass]="{
                            'bg-black': planificacion.mostrar,
                            'dark:bg-gray-800': !planificacion.mostrar}">
                            {{planificacion.mes}}
                        </div>
                    </div>
                </ng-container>
            </div>
            <div class="col-span-3 grid grid-cols-3">
                <div class="col-span-1 flex justify-center items-center">
                    <app-pdf-calendario></app-pdf-calendario>
                </div>
                <div class="col-span-1 flex justify-center items-center">
                    <button (click)="MostrarModalActualizacion()" class="bg-orange-400 flex"> 
                        <span>ACTUALIZACIÓN</span>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                            class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </button>
                </div>
                <div class="col-span-1 flex justify-center items-center">
                    <button (click)="BorrarPlanificacion()" class="bg-blue-200 flex">
                        <span>BORRAR</span>
                    </button>
                </div>
            </div>

        </div>
        <div class="grid grid-cols-12 bg-yellow-500">
            <div class="bg-indigo-600" 
                [ngClass]="{'col-span-9': true,
                            'col-span-12': false}">
                <ng-container *ngIf="planificacionActual!=null">
                    <div class="grid grid-cols-4 gap-4 grid-flow-row auto-rows-auto rounded-md ">
                        <ng-container *ngFor="let dia of planificacionActual.planificacion | paginate:{
                            id: 'first',
                            itemsPerPage: CantidadPorPagina,
                            currentPage: PaginacionPlanificacion,
                            totalItems: ContadorCalendario};
                            let ix = index">
                            <div
                                class="grid grid-cols-1 gap-2 bg-slate-600 rounded-md m-2 text-white hover:bg-slate-800 hover:scale-110 hover:duration-300 shadow-lg shadow-slate-500/50">
                                <div class="m-3 place-content-center relative flex">
                                    <div class="flex justify-between">
                                        <div class="flex flex-col gap-1">
                                            <div>{{dia.dia_semana}} {{dia.dia_numero}}</div>
                                            <div class="flex justify-center"></div>
                                        </div>
                                    </div>
                                </div>
                                <ng-container *ngFor="let empleado of dia.empleados">
                                    <div class="grid grid-cols-2 text-xs m-2">
                                        <div class="grid-cols-1 flex justify-start">{{empleado.nombre}} {{empleado.apellido}}</div>
                                        <div class="grid-cols-1 flex justify-end" [ngSwitch]="empleado.turno">
                                            <div *ngSwitchCase="1">Mañana</div>
                                            <div *ngSwitchCase="2">Tarde</div>
                                            <div *ngSwitchCase="3">Noche</div>
                                            <div *ngSwitchDefault>Libre</div>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </ng-container>
                    </div>
                    <div class="mx-auto flex justify-center">
                        <pagination-controls id="first" previousLabel="Anterior" nextLabel="Siguiente"
                            (pageChange)="PaginacionPlanificacion = $event">
                        </pagination-controls>
                    </div>
                </ng-container>
            </div>
            <ng-container *ngIf="true">
                <div class="bg-white col-span-3 flex flex-col">
                    <div class="flex justify-center">
                        <h1 class="italic text-lg font-semibold hover:text-black">Actualizaciones</h1>
                    </div>
                    <ng-container *ngFor="let actualizacion of planificacionActual.estadistica.empleados">
                        <div class="flex justify-center">
                            <p>xD</p>
                        </div>
                    </ng-container>
                </div>
            </ng-container>
        </div>


        <div class="flex justify-center p-3 bg-blue-500 mt-10">
            <h1 class="font-bold p-2 uppercase text-3xl text-slate-200 leading-4"> INFORMACIÓN</h1>
        </div>

        <div class="grid grid-cols-3 bg-red-500 gap-4 p-4 ">
            <ng-container *ngFor="let empleado of planificacionActual.estadistica.empleados">
                <div class="col-span-1 grid grid-cols-3 flex justify-center bg-blue-500">
                    <div class="col-span-1 p-3">
                        <div class="bg-black mx-auto w-20 h-20 rounded-full overflow-hidden flex-shrink-0">
                            <img src="{{ empleado.imagen }}" class="w-full h-full object-contain object-center">
                        </div>
                        <div class="pt-2 text-center">
                            <p class="font-bold text-base text-slate-200 leading-4">
                                {{empleado.nombre_paterno}}
                            </p>
                            <p class="font-bold text-base text-slate-200 leading-4">
                                {{empleado.apellido_paterno}}
                            </p>
                        </div>
                    </div>
                    <div class="col-span-2 p-3">
                        <div class="border border-yellow-500 flex justify-between">
                            <div>
                                <p class="font-bold p-1 text-slate-200 leading-4">Mañana: </p>
                                <p class="font-bold p-1 text-slate-200 leading-4">Tarde: </p>
                                <p class="font-bold p-1 text-slate-200 leading-4">Noche: </p>
                                <p class="font-bold p-1 text-slate-200 leading-4">Feriado: </p>
                                <p class="font-bold p-1 text-slate-200 leading-4">Libre: </p>
                            </div>
                            <div class="text-center">
                                <p class="font-bold p-1 text-slate-200 leading-4"> {{empleado.turno1}}</p>
                                <p class="font-bold p-1 text-slate-200 leading-4"> {{empleado.turno2}}</p>
                                <p class="font-bold p-1 text-slate-200 leading-4"> {{empleado.turno3}}</p>
                                <p class="font-bold p-1 text-slate-200 leading-4"> {{empleado.feriado}}</p>
                                <p class="font-bold p-1 text-slate-200 leading-4"> {{empleado.libre}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </ng-container>
    <ng-template #SinPlanificacion>
    </ng-template>
</div>

<!-- OPACIDAD EN LA PÁGINA -->
<ng-container 
    *ngIf="horarioService.modalAddActualizacion || horarioService.modalAddPlanificacion">
    <div class="fixed inset-0 bg-gray-800 bg-opacity-70"></div>
</ng-container>


<!-- MODAL ADD ACTUALIZACIÓN -->
<ng-container *ngIf="horarioService.modalAddActualizacion">
    <app-agregarActualizacion
    [planificacion_id]="planificacionActual.planificacion_id"
    (recargarPagina)="ngOnInit()"
    >
    </app-agregarActualizacion>
</ng-container>

<!-- MODAL ADD PLANIFICACIÓN-->
<ng-container *ngIf="horarioService.modalAddPlanificacion">
    <app-itinerario-aviones>
    </app-itinerario-aviones>
</ng-container>
